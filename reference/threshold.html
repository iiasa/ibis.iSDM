<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="It is common in many applications of species distribution
modelling that estimated continuous suitability surfaces are converted into
discrete representations of where suitable habitat might or might not exist.
This so called threshold'ing can be done in various ways which are further
described in the details.
In case a SpatRaster is provided as input in this function for
obj, it is furthermore necessary to provide a sf object for
validation as there is no DistributionModel to read this information
from.
Note: This of course also allows to estimate the threshold based on withheld data, for instance
those created from an a-priori cross-validation procedure.
For BiodiversityScenario objects, adding this function to the processing
pipeline stores a threshold attribute in the created scenario object."><title>Threshold a continuous prediction to a categorical layer — threshold • ibis.iSDM</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Threshold a continuous prediction to a categorical layer — threshold"><meta property="og:description" content="It is common in many applications of species distribution
modelling that estimated continuous suitability surfaces are converted into
discrete representations of where suitable habitat might or might not exist.
This so called threshold'ing can be done in various ways which are further
described in the details.
In case a SpatRaster is provided as input in this function for
obj, it is furthermore necessary to provide a sf object for
validation as there is no DistributionModel to read this information
from.
Note: This of course also allows to estimate the threshold based on withheld data, for instance
those created from an a-priori cross-validation procedure.
For BiodiversityScenario objects, adding this function to the processing
pipeline stores a threshold attribute in the created scenario object."><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@Martin_Ecology"><meta name="twitter:site" content="@IIASAVienna"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ibis.iSDM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/01_data_preparationhelpers.html">1. Helper functions to prepare inputs</a>
    <a class="dropdown-item" href="../articles/02_train_simple_model.html">2. Train a model</a>
    <a class="dropdown-item" href="../articles/03_integrate_data.html">3. Integrate data</a>
    <a class="dropdown-item" href="../articles/04_biodiversity_projections.html">4. Biodiversity projections</a>
    <a class="dropdown-item" href="../articles/05_mechanistic_estimation.html">5. Simulating mechanisms</a>
    <a class="dropdown-item" href="../articles/06_engine_comparison.html">6. Engine comparison</a>
    <a class="dropdown-item" href="../articles/07_package_comparison.html">7. Other packages</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/08_frequently-asked-questions.html">FAQ</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/contributing.html">Contributing</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/iiasa/ibis.iSDM/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Threshold a continuous prediction to a categorical layer</h1>
      <small class="dont-index">Source: <a href="https://github.com/iiasa/ibis.iSDM/blob/HEAD/R/threshold.R" class="external-link"><code>R/threshold.R</code></a></small>
      <div class="d-none name"><code>threshold.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>It is common in many applications of species distribution
modelling that estimated continuous suitability surfaces are converted into
discrete representations of where suitable habitat might or might not exist.
This so called <em>threshold'ing</em> can be done in various ways which are further
described in the details.</p>
<p>In case a <code><a href="https://rdrr.io/pkg/terra/man/SpatRaster-class.html" class="external-link">SpatRaster</a></code> is provided as input in this function for
<code>obj</code>, it is furthermore necessary to provide a <code>sf</code> object for
validation as there is no <code><a href="DistributionModel-class.html">DistributionModel</a></code> to read this information
from.
<strong>Note:</strong> This of course also allows to estimate the threshold based on withheld data, for instance
those created from an a-priori cross-validation procedure.</p>
<p>For <code><a href="BiodiversityScenario-class.html">BiodiversityScenario</a></code> objects, adding this function to the processing
pipeline stores a threshold attribute in the created <a href="scenario.html">scenario</a> object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">threshold</span><span class="op">(</span></span>
<span>  <span class="va">obj</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"mtp"</span>,</span>
<span>  value <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  point <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  field_occurrence <span class="op">=</span> <span class="st">"observed"</span>,</span>
<span>  format <span class="op">=</span> <span class="st">"binary"</span>,</span>
<span>  return_threshold <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for ANY,character,numeric,ANY,character,logical</span></span>
<span><span class="fu">threshold</span><span class="op">(</span><span class="va">obj</span>,<span class="va">method</span>,<span class="va">value</span>,<span class="va">point</span>,<span class="va">format</span>,<span class="va">return_threshold</span>,<span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for SpatRaster,character,ANY,ANY,character,logical</span></span>
<span><span class="fu">threshold</span><span class="op">(</span><span class="va">obj</span>,<span class="va">method</span>,<span class="va">value</span>,<span class="va">point</span>,<span class="va">format</span>,<span class="va">return_threshold</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for BiodiversityScenario,ANY</span></span>
<span><span class="fu">threshold</span><span class="op">(</span><span class="va">obj</span>,<span class="va">value</span>,<span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>obj</dt>
<dd><p>A <a href="BiodiversityScenario-class.html">BiodiversityScenario</a> object to which an existing threshold is
to be added.</p></dd>


<dt>method</dt>
<dd><p>A specifc method for thresholding. See details for available
options.</p></dd>


<dt>value</dt>
<dd><p>A <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code> value specifying the specific threshold for scenarios
(Default: <code>NULL</code> Grab from object).</p></dd>


<dt>point</dt>
<dd><p>A <code>sf</code> object containing observational data used for model
training.</p></dd>


<dt>field_occurrence</dt>
<dd><p>A <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code> location of
biodiversity point records.</p></dd>


<dt>format</dt>
<dd><p><code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code> indication of whether <code>"binary"</code>,
<code>"normalize"</code> or <code>"percentile"</code> formatted thresholds are to be
created (Default: <code>"binary"</code>). Also see Muscatello et al. (2021).</p></dd>


<dt>return_threshold</dt>
<dd><p>Should threshold value be returned instead (Default:
<code>FALSE</code>)</p></dd>


<dt>...</dt>
<dd><p>Any other parameter. Used to fetch value if set somehow.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <a href="https://rdrr.io/pkg/terra/man/SpatRaster-class.html" class="external-link">SpatRaster</a> if a <a href="https://rdrr.io/pkg/terra/man/SpatRaster-class.html" class="external-link">SpatRaster</a> object as input. Otherwise the
threshold is added to the respective <code><a href="DistributionModel-class.html">DistributionModel</a></code> or
<code><a href="BiodiversityScenario-class.html">BiodiversityScenario</a></code> object.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The following options are currently implemented:</p><ul><li><p><code>'fixed'</code> = applies a single pre-determined threshold. Requires <code>value</code> to be set.</p></li>
<li><p><code>'mtp'</code> = minimum training presence is used to find and set the lowest predicted suitability for any occurrence point.</p></li>
<li><p><code>'percentile'</code> = For a percentile threshold. A <code>value</code> as parameter has to be set here.</p></li>
<li><p><code>'min.cv'</code> = Threshold the raster so to minimize the coefficient of variation (cv) of the posterior. Uses the lowest tercile of the cv in space. Only feasible with Bayesian engines.</p></li>
<li><p><code>'TSS'</code> = Determines the optimal TSS (True Skill Statistic). Requires the <code>"modEvA"</code> package to be installed.</p></li>
<li><p><code>'kappa'</code> = Determines the optimal kappa value (Kappa). Requires the <code>"modEvA"</code> package to be installed.</p></li>
<li><p><code>'F1score'</code> = Determines the optimal F1score (also known as Sorensen similarity). Requires the <code>"modEvA"</code> package to be installed.</p></li>
<li><p><code>'F1score'</code> = Determines the optimal sensitivity of presence records. Requires the <code>"modEvA"</code> package to be installed.</p></li>
<li><p><code>'Sensitivity'</code> = Determines the optimal sensitivity of presence records. Requires the <code>"modEvA"</code> package to be installed.</p></li>
<li><p><code>'Specificity'</code> = Determines the optimal sensitivity of presence records. Requires the <code>"modEvA"</code> package to be installed.</p></li>
<li><p><code>'AUC'</code> = Determines the optimal AUC of presence records. Requires the <code>"modEvA"</code> package to be installed.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    
<ul><li><p>Lawson, C.R., Hodgson, J.A., Wilson, R.J., Richards, S.A., 2014. Prevalence, thresholds and the performance of presence-absence models. Methods Ecol. Evol. 5, 54–64. https://doi.org/10.1111/2041-210X.12123</p></li>
<li><p>Liu, C., White, M., Newell, G., 2013. Selecting thresholds for the prediction of species occurrence with presence-only data. J. Biogeogr. 40, 778–789. https://doi.org/10.1111/jbi.12058</p></li>
<li><p>Muscatello, A., Elith, J., Kujala, H., 2021. How decisions about fitting species distribution models affect conservation outcomes. Conserv. Biol. 35, 1309–1320. https://doi.org/10.1111/cobi.13669</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code>"modEvA"</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span> <span class="co"># Where mod is an estimated DistributionModel</span></span></span>
<span class="r-in"><span> <span class="va">tr</span> <span class="op">&lt;-</span> <span class="fu">threshold</span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">tr</span><span class="op">$</span><span class="fu">plot_threshold</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Martin Jung.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

