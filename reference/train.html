<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function trains a distribution() model with the specified engine and
furthermore has some generic parameters that apply to all engines (regardless of type).
Users are advised to check the help files for individual engine for advice on how
the estimation is being done."><title>Train the model from a given engine — train • ibis.iSDM</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Train the model from a given engine — train"><meta property="og:description" content="This function trains a distribution() model with the specified engine and
furthermore has some generic parameters that apply to all engines (regardless of type).
Users are advised to check the help files for individual engine for advice on how
the estimation is being done."><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@Martin_Ecology"><meta name="twitter:site" content="@IIASAVienna"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ibis.iSDM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/comparison.html">Comparison</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/frequently-asked-questions.html">FAQ</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/01_train_simple_model.html">1. Train a model</a>
    <a class="dropdown-item" href="../articles/02_integrate_data.html">2. Integrate data</a>
    <a class="dropdown-item" href="../articles/03_model_assessment.html">3. Model assessment</a>
    <a class="dropdown-item" href="../articles/04_biodiversity_projections.html">4. Biodiversity projections</a>
    <a class="dropdown-item" href="../articles/05_engine_comparison.html">5. Engine Comparison</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/contributing.html">Contributing</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/iiasa/ibis.iSDM/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Train the model from a given engine</h1>
      <small class="dont-index">Source: <a href="https://github.com/iiasa/ibis.iSDM/blob/HEAD/R/train.R" class="external-link"><code>R/train.R</code></a></small>
      <div class="d-none name"><code>train.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function trains a <code><a href="distribution.html">distribution()</a></code> model with the specified engine and
furthermore has some generic parameters that apply to all engines (regardless of type).</p>
<p>Users are advised to check the help files for individual engine for advice on how
the estimation is being done.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">train</span><span class="op">(</span>
  <span class="va">x</span>,
  <span class="va">runname</span>,
  rm_corPred <span class="op">=</span> <span class="cn">FALSE</span>,
  varsel <span class="op">=</span> <span class="st">"reg"</span>,
  inference_only <span class="op">=</span> <span class="cn">FALSE</span>,
  only_linear <span class="op">=</span> <span class="cn">TRUE</span>,
  bias_variable <span class="op">=</span> <span class="cn">NULL</span>,
  bias_value <span class="op">=</span> <span class="cn">NULL</span>,
  verbose <span class="op">=</span> <span class="cn">FALSE</span>,
  <span class="va">...</span>
<span class="op">)</span>

<span class="co"># S4 method for BiodiversityDistribution</span>
<span class="fu">train</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p><code><a href="distribution.html">distribution()</a></code> (i.e. <code><a href="BiodiversityDistribution-class.html">BiodiversityDistribution</a></code>) object).</p></dd>
<dt>runname</dt>
<dd><p>A <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code> name of the trained run.</p></dd>
<dt>rm_corPred</dt>
<dd><p>Remove highly correlated predictors (Default: <code>FALSE</code>). This option
removes - based on pairwise comparisons - those covariates that are highly collinear (Pearson's r = <code>&gt;0.7</code>).</p></dd>
<dt>varsel</dt>
<dd><p>Perform a variable selection on the set of predictors either prior to building the model
or via variable selection / regularization of the model. Available options are:</p><ul><li><p><code>none</code> for no or default priors and no extensive hyperparameter search.</p></li>
<li><p><code>reg</code> Model selection either through DIC or regularization / hyperparameter tuning depending on the
engine (Default option).</p></li>
<li><p><code>abess</code> A-priori adaptive best subset selection of covariates via the abess package (see References).
Note that this effectively fits a separate generalized linear model to reduce the number of covariates.
Can be helpful for engines that don't directly support efficient variable regularization and when <code>N&gt;100</code>.</p></li>
</ul></dd>
<dt>inference_only</dt>
<dd><p>By default the engine is used to create
a spatial prediction of the suitability surface, which can take time. If only inferences of
the strength of relationship between covariates and observations are required, this parameter
can be set to <code>TRUE</code> to ignore any spatial projection (Default: <code>FALSE</code>).</p></dd>
<dt>only_linear</dt>
<dd><p>Fit model only on linear baselearners and functions. Depending
on the engine setting this option to <code>FALSE</code> will result in non-linear relationships
between observations and covariates, often increasing processing time (Default: <code>TRUE</code>).
How non-linearity is captured depends on the used engine.</p></dd>
<dt>bias_variable</dt>
<dd><p>A <code><a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a></code> with names of variables to be set to <em>bias_value</em> (Default: <code>NULL</code>).
This option can for instance be used to 'partial' out certain biases after predictions have been made.
See Examples.</p></dd>
<dt>bias_value</dt>
<dd><p>A <code><a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a></code> with values to be set to <em>bias_variable</em> (Default: <code>NULL</code>).
Specifying a <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code> value here sets <code>bias_variable</code> to the target value.</p></dd>
<dt>...</dt>
<dd><p>further arguments passed on.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <a href="DistributionModel-class.html">DistributionModel</a> object.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The resulting object contains both a <code>fit_best</code> object of the estimated model and, if <code>inference_only</code> is <code>FALSE</code>
a RasterLayer object named <code>prediction</code> that contains the spatial prediction of the model.
These objects can be requested via <code>object$get_data("fit_best")</code>.</p>
<p>Note that several engines do not support fully integrated likelihood models (such <a href="engine_gdb.html">engine_gdb</a> or
<a href="engine_xgboost.html">engine_xgboost</a>) for example. In this case the estimation strategy for multiple added biodiversity datasets
(e.g. more than 1) is to fit recurrent models in sequence, where
the <code>nth'} spatial projection is provided as input to the \code{nth'+1</code> dataset.
See also Miller et al. (2019) in the references for more details on this strategy. Of course,
if users want more control about this aspect, another option is to fit separate models
and make use of the <a href="add_offset_range.html">add_offset_range</a> and <a href="ensemble.html">ensemble</a> functionalities.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    
<ul><li><p>Miller, D.A.W., Pacifici, K., Sanderlin, J.S., Reich, B.J., 2019. The recent past and promising future for data integration methods to estimate species’ distributions. Methods Ecol. Evol. 10, 22–37. https://doi.org/10.1111/2041-210X.13110</p></li>
<li><p>Zhu, J., Wen, C., Zhu, J., Zhang, H., &amp; Wang, X. (2020). A polynomial algorithm for best-subset selection problem. Proceedings of the National Academy of Sciences, 117(52), 33117-33123.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="engine_gdb.html">engine_gdb</a>, <a href="engine_xgboost.html">engine_xgboost</a>, <a href="engine_bart.html">engine_bart</a>, <a href="engine_inla.html">engine_inla</a>, <a href="engine_inlabru.html">engine_inlabru</a>, <a href="engine_breg.html">engine_breg</a></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"> <span class="co"># Fit a linear penalized logistic regression model via stan</span></span>
<span class="r-in"> <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="distribution.html">distribution</a></span><span class="op">(</span><span class="va">background</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">        <span class="co"># Presence-absence data</span></span>
<span class="r-in">        <span class="fu"><a href="add_biodiversity_poipa.html">add_biodiversity_poipa</a></span><span class="op">(</span><span class="va">surveydata</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">        <span class="co"># Add predictors and scale them</span></span>
<span class="r-in">        <span class="fu"><a href="add_predictors.html">add_predictors</a></span><span class="op">(</span>env <span class="op">=</span> <span class="va">predictors</span>, transform <span class="op">=</span> <span class="st">"scale"</span>, derivates <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">        <span class="co"># Use stan for estimation</span></span>
<span class="r-in">        <span class="fu"><a href="engine_stan.html">engine_stan</a></span><span class="op">(</span>chains <span class="op">=</span> <span class="fl">2</span>, iter <span class="op">=</span> <span class="fl">1000</span>, warmup <span class="op">=</span> <span class="fl">500</span><span class="op">)</span></span>
<span class="r-in"> <span class="co"># Train the model</span></span>
<span class="r-in"> <span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu">train</span><span class="op">(</span><span class="va">x</span>, only_linear <span class="op">=</span> <span class="cn">TRUE</span>, varsel <span class="op">=</span> <span class="st">'reg'</span><span class="op">)</span></span>
<span class="r-in"> <span class="va">mod</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Martin Jung.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>

