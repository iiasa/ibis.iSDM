<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Add a control to a BiodiversityModel object to control biases — add_control_bias • ibis.iSDM</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add a control to a BiodiversityModel object to control biases — add_control_bias"><meta name="description" content='Sampling and other biases are pervasive drivers of the spatial
location of biodiversity datasets. While the integration of other, presumably
less biased data can be one way of controlling for sampling biases, another
way is to control directly for the bias in the model. Currently supported
methods are:
"partial" - An approach described by Warton et al. (2013) to
control the biases in a model, by including a specified variable ("layer") in
the model, but "partialling" it out during the projection phase. Specifically
the variable is set to a specified value ("bias_value"), which is by default
the minimum value observed across the background.
"offset" - Dummy
method that points to the add_offset_bias() functionality (see note).
Makes use of offsets to factor out a specified bias variable.
"proximity" - Use the proximity or distance between points as a weight
in the model. This option effectively places greater weight on points farther
away. Note: In the best case this can control for spatial bias and
aggregation, in the worst case it can place a lot of emphasis on points that
likely outliers or misidentification (in terms of species).


See also details for some explanations.'><meta property="og:description" content='Sampling and other biases are pervasive drivers of the spatial
location of biodiversity datasets. While the integration of other, presumably
less biased data can be one way of controlling for sampling biases, another
way is to control directly for the bias in the model. Currently supported
methods are:
"partial" - An approach described by Warton et al. (2013) to
control the biases in a model, by including a specified variable ("layer") in
the model, but "partialling" it out during the projection phase. Specifically
the variable is set to a specified value ("bias_value"), which is by default
the minimum value observed across the background.
"offset" - Dummy
method that points to the add_offset_bias() functionality (see note).
Makes use of offsets to factor out a specified bias variable.
"proximity" - Use the proximity or distance between points as a weight
in the model. This option effectively places greater weight on points farther
away. Note: In the best case this can control for spatial bias and
aggregation, in the worst case it can place a lot of emphasis on points that
likely outliers or misidentification (in terms of species).


See also details for some explanations.'><meta property="og:image" content="https://iiasa.github.io/ibis.iSDM/logo.png"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@Martin_Ecology"><meta name="twitter:site" content="@IIASAVienna"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ibis.iSDM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/01_data_preparationhelpers.html">1. Helper functions to prepare inputs</a></li>
    <li><a class="dropdown-item" href="../articles/02_train_simple_model.html">2. Train a model</a></li>
    <li><a class="dropdown-item" href="../articles/03_integrate_data.html">3. Integrate data</a></li>
    <li><a class="dropdown-item" href="../articles/04_biodiversity_projections.html">4. Biodiversity projections</a></li>
    <li><a class="dropdown-item" href="../articles/05_mechanistic_estimation.html">5. Simulating mechanisms</a></li>
    <li><a class="dropdown-item" href="../articles/06_engine_comparison.html">6. Engine comparison</a></li>
    <li><a class="dropdown-item" href="../articles/07_package_comparison.html">7. Other packages</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../articles/08_frequently-asked-questions.html">FAQ</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/contributing.html">Contributing</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/iiasa/ibis.iSDM/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Add a control to a BiodiversityModel object to control biases</h1>
      <small class="dont-index">Source: <a href="https://github.com/iiasa/ibis.iSDM/blob/v0.1.5/R/add_control_bias.R" class="external-link"><code>R/add_control_bias.R</code></a></small>
      <div class="d-none name"><code>add_control_bias.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Sampling and other biases are pervasive drivers of the spatial
location of biodiversity datasets. While the integration of other, presumably
less biased data can be one way of controlling for sampling biases, another
way is to control directly for the bias in the model. Currently supported
methods are:</p><ul><li><p><code>"partial"</code> - An approach described by Warton et al. (2013) to
control the biases in a model, by including a specified variable ("layer") in
the model, but "partialling" it out during the projection phase. Specifically
the variable is set to a specified value ("bias_value"), which is by default
the minimum value observed across the background.</p></li>
<li><p><code>"offset"</code> - Dummy
method that points to the <code><a href="add_offset_bias.html">add_offset_bias()</a></code> functionality (see note).
Makes use of offsets to factor out a specified bias variable.</p></li>
<li><p><code>"proximity"</code> - Use the proximity or distance between points as a weight
in the model. This option effectively places greater weight on points farther
away. <em>Note:</em> In the best case this can control for spatial bias and
aggregation, in the worst case it can place a lot of emphasis on points that
likely outliers or misidentification (in terms of species).</p></li>
</ul><p>See also details for some explanations.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_control_bias</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">layer</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"partial"</span>,</span>
<span>  bias_value <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  maxdist <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  add <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'BiodiversityDistribution'</span></span>
<span><span class="fu">add_control_bias</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">layer</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"partial"</span>,</span>
<span>  bias_value <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  maxdist <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  add <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p><code><a href="distribution.html">distribution()</a></code> (i.e. <code><a href="BiodiversityDistribution-class.html">BiodiversityDistribution</a></code>) object.</p></dd>


<dt id="arg-layer">layer<a class="anchor" aria-label="anchor" href="#arg-layer"></a></dt>
<dd><p>A <code>sf</code> or <code>SpatRaster</code> object with the range for the target
feature. Specify a variable that is not already added to <code>"x"</code> to
avoid issues with duplications.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>A <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code> vector describing the method used for bias
control. Available options are <code>"partial"</code> (Default), <code>"offset"</code>
or <code>"proximity"</code>.</p></dd>


<dt id="arg-bias-value">bias_value<a class="anchor" aria-label="anchor" href="#arg-bias-value"></a></dt>
<dd><p>A <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code> with a value for <code>"layer"</code>. Specifying a
<code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code> value here sets <code>layer</code> to the target value during
projection. By default the value is set to the minimum value found in the
layer (Default: <code>NULL</code>).</p></dd>


<dt id="arg-maxdist">maxdist<a class="anchor" aria-label="anchor" href="#arg-maxdist"></a></dt>
<dd><p>A <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code> giving the maximum distance if method
<code>"proximity"</code> is used. If unset it uses by default the distance to the
centroid of a minimum convex polygon encircling all points.</p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>A <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code> given the initial weight to points if method
<code>"proximity"</code> is used (Default: <code>1</code>). For example, if set to
values smaller than <code>1</code> neighbouring points will be weighted less.</p></dd>


<dt id="arg-add">add<a class="anchor" aria-label="anchor" href="#arg-add"></a></dt>
<dd><p><code><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></code> specifying whether a new offset is to be added.
Setting this parameter to <code>FALSE</code> replaces the current offsets with
the new one (Default: <code>TRUE</code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Adds bias control option to a <code><a href="distribution.html">distribution</a></code> object.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>In the case of <code>"proximity"</code> weights are assigned to each point, placing
higher weight on points further away and with less overlap. Weights are are
assigned up to a maximum of distance which can be provided by the user
(parameter <code>"maxdist"</code>). This distance is ideally informed by some
knowledge of the species to be modelled (e.g., maximum dispersal distance).
If not provided, it is set to the distance of the centroid of a minimum
convex polygon encircling all observations. The parameter <code>"alpha"</code> is a
weighting factor which can be used to diminish the effect of neighboring
points. <br> For a given observation \(i\), the weight \(w\) is defined as
$$w_i = 1 / (1 + \epsilon)$$ where $$\epsilon = \sum_{n=1}^{N}((1 -
d_n)/d_sac)^\alpha$$ in which \(N\) is the total number of points closer
than the maximum distance (\(d_sac\)) of point \(i\), and \(d_n\) the
distance between focal point \(i\) and point \(n\).</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p><strong>Covariate transformations applied to other predictors need to be applied to bias too.</strong>
Another option to consider biases particular in Poisson-point process models
is to remove them through an offset. Functionality to do so is available
through the <code><a href="add_offset_bias.html">add_offset_bias()</a></code> method. Setting the method to
<code>"offset"</code> will automatically point to this option.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<ul><li><p>Warton, D.I., Renner, I.W. and Ramp, D., 2013. Model-based control of observer
bias for the analysis of presence-only data in ecology. PloS one, 8(11), p.e79168.</p></li>
<li><p>Merow, C., Allen, J.M., Aiello-Lammens, M., Silander, J.A., 2016. Improving
niche and range estimates with Maxent and point process models by integrating
spatially explicit information. Glob. Ecol. Biogeogr. 25, 1022–1036. https://doi.org/10.1111/geb.12453</p></li>
<li><p>Botella, C., Joly, A., Bonnet, P., Munoz, F., &amp; Monestiez, P. (2021). Jointly
estimating spatial sampling effort and habitat suitability for multiple species
from opportunistic presence‐only data. Methods in Ecology and Evolution, 12(5), 933-945.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="add_limits_extrapolation.html">add_limits_extrapolation()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span> <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="distribution.html">distribution</a></span><span class="op">(</span><span class="va">background</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>   <span class="fu"><a href="add_predictors.html">add_predictors</a></span><span class="op">(</span><span class="va">covariates</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>   <span class="fu">add_control_bias</span><span class="op">(</span><span class="va">biasvariable</span>, bias_value <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martin Jung.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

