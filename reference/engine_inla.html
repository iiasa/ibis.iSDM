<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Use INLA as engine — engine_inla • ibis.iSDM</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Use INLA as engine — engine_inla"><meta name="description" content="Allows a full Bayesian analysis of linear and additive models
using Integrated Nested Laplace approximation. Engine has been largely
superceded by the engine_inlabru package and users are advised to us this
one, unless specific options are required."><meta property="og:description" content="Allows a full Bayesian analysis of linear and additive models
using Integrated Nested Laplace approximation. Engine has been largely
superceded by the engine_inlabru package and users are advised to us this
one, unless specific options are required."><meta property="og:image" content="https://iiasa.github.io/ibis.iSDM/logo.png"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@Martin_Ecology"><meta name="twitter:site" content="@IIASAVienna"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ibis.iSDM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/01_data_preparationhelpers.html">1. Helper functions to prepare inputs</a></li>
    <li><a class="dropdown-item" href="../articles/02_train_simple_model.html">2. Train a model</a></li>
    <li><a class="dropdown-item" href="../articles/03_integrate_data.html">3. Integrate data</a></li>
    <li><a class="dropdown-item" href="../articles/04_biodiversity_projections.html">4. Biodiversity projections</a></li>
    <li><a class="dropdown-item" href="../articles/05_mechanistic_estimation.html">5. Simulating mechanisms</a></li>
    <li><a class="dropdown-item" href="../articles/06_engine_comparison.html">6. Engine comparison</a></li>
    <li><a class="dropdown-item" href="../articles/07_package_comparison.html">7. Other packages</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../articles/08_frequently-asked-questions.html">FAQ</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/contributing.html">Contributing</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/iiasa/ibis.iSDM/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Use INLA as engine</h1>
      <small class="dont-index">Source: <a href="https://github.com/iiasa/ibis.iSDM/blob/dev/R/engine_inla.R" class="external-link"><code>R/engine_inla.R</code></a></small>
      <div class="d-none name"><code>engine_inla.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Allows a full Bayesian analysis of linear and additive models
using Integrated Nested Laplace approximation. Engine has been largely
superceded by the <code><a href="engine_inlabru.html">engine_inlabru</a></code> package and users are advised to us this
one, unless specific options are required.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">engine_inla</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  optional_mesh <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  optional_projstk <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max.edge <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  offset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cutoff <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  proj_stepsize <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  timeout <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  strategy <span class="op">=</span> <span class="st">"auto"</span>,</span>
<span>  int.strategy <span class="op">=</span> <span class="st">"eb"</span>,</span>
<span>  barrier <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"response"</span>,</span>
<span>  area <span class="op">=</span> <span class="st">"gpc2"</span>,</span>
<span>  nonconvex.bdry <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  nonconvex.convex <span class="op">=</span> <span class="op">-</span><span class="fl">0.15</span>,</span>
<span>  nonconvex.concave <span class="op">=</span> <span class="op">-</span><span class="fl">0.05</span>,</span>
<span>  nonconvex.res <span class="op">=</span> <span class="fl">40</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p><code><a href="distribution.html">distribution()</a></code> (i.e. <code><a href="BiodiversityDistribution-class.html">BiodiversityDistribution</a></code>) object.</p></dd>


<dt id="arg-optional-mesh">optional_mesh<a class="anchor" aria-label="anchor" href="#arg-optional-mesh"></a></dt>
<dd><p>A directly supplied <code>"INLA"</code> mesh (Default:
<code>NULL</code>)</p></dd>


<dt id="arg-optional-projstk">optional_projstk<a class="anchor" aria-label="anchor" href="#arg-optional-projstk"></a></dt>
<dd><p>A directly supplied projection stack. Useful if
projection stack is identical for multiple species (Default: <code>NULL</code>)</p></dd>


<dt id="arg-max-edge">max.edge<a class="anchor" aria-label="anchor" href="#arg-max-edge"></a></dt>
<dd><p>The largest allowed triangle edge length, must be in the same
scale units as the coordinates. Default is an educated guess (Default:
<code>NULL</code>).</p></dd>


<dt id="arg-offset">offset<a class="anchor" aria-label="anchor" href="#arg-offset"></a></dt>
<dd><p>interpreted as a numeric factor relative to the approximate
data diameter. Default is an educated guess (Default: <code>NULL</code>).</p></dd>


<dt id="arg-cutoff">cutoff<a class="anchor" aria-label="anchor" href="#arg-cutoff"></a></dt>
<dd><p>The minimum allowed distance between points on the mesh.
Default is an educated guess (Default: <code>NULL</code>).</p></dd>


<dt id="arg-proj-stepsize">proj_stepsize<a class="anchor" aria-label="anchor" href="#arg-proj-stepsize"></a></dt>
<dd><p>The stepsize in coordinate units between cells of the
projection grid (Default: <code>NULL</code>).</p></dd>


<dt id="arg-timeout">timeout<a class="anchor" aria-label="anchor" href="#arg-timeout"></a></dt>
<dd><p>Specify a timeout for INLA models in sec. Afterwards it
passed.</p></dd>


<dt id="arg-strategy">strategy<a class="anchor" aria-label="anchor" href="#arg-strategy"></a></dt>
<dd><p>Which approximation to use for the joint posterior. Options
are <code>"auto"</code> ("default"), <code>"adaptative"</code>, <code>"gaussian"</code>,
<code>"simplified.laplace"</code> &amp; <code>"laplace"</code>.</p></dd>


<dt id="arg-int-strategy">int.strategy<a class="anchor" aria-label="anchor" href="#arg-int-strategy"></a></dt>
<dd><p>Integration strategy. Options are
<code>"auto"</code>,<code>"grid"</code>, <code>"eb"</code> ("default") &amp; <code>"ccd"</code>. See
also https://groups.google.com/g/r-inla-discussion-group/c/hDboQsJ1Mls</p></dd>


<dt id="arg-barrier">barrier<a class="anchor" aria-label="anchor" href="#arg-barrier"></a></dt>
<dd><p>Should a barrier model be added to the model?</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>The mode used for creating posterior predictions. Either
summarizing the linear <code>"predictor"</code> or <code>"response"</code> (Default:
<code>"response"</code>).</p></dd>


<dt id="arg-area">area<a class="anchor" aria-label="anchor" href="#arg-area"></a></dt>
<dd><p>Accepts a <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code> denoting the type of area calculation to
be done on the mesh (Default: <code>'gpc2'</code>).</p></dd>


<dt id="arg-nonconvex-bdry">nonconvex.bdry<a class="anchor" aria-label="anchor" href="#arg-nonconvex-bdry"></a></dt>
<dd><p>Create a non-convex boundary hulls instead (Default:
<code>FALSE</code>) <strong>Not yet implemented</strong></p></dd>


<dt id="arg-nonconvex-convex">nonconvex.convex<a class="anchor" aria-label="anchor" href="#arg-nonconvex-convex"></a></dt>
<dd><p>Non-convex minimal extension radius for convex
curvature <strong>Not yet implemented</strong></p></dd>


<dt id="arg-nonconvex-concave">nonconvex.concave<a class="anchor" aria-label="anchor" href="#arg-nonconvex-concave"></a></dt>
<dd><p>Non-convex minimal extension radius for concave
curvature <strong>Not yet implemented</strong></p></dd>


<dt id="arg-nonconvex-res">nonconvex.res<a class="anchor" aria-label="anchor" href="#arg-nonconvex-res"></a></dt>
<dd><p>Computation resolution for nonconvex.hulls <strong>Not yet
implemented</strong></p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Other options.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An engine.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>All <code>INLA</code> engines require the specification of a mesh that
needs to be provided to the <code>"optional_mesh"</code> parameter. Otherwise the
mesh will be created based on best guesses of the data spread. A good mesh
needs to have triangles as regular as possible in size and shape:
equilateral.</p>
<p><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">*</a> <code>"max.edge"</code>: The largest allowed triangle edge length, must be in
the same scale units as the coordinates Lower bounds affect the density of
triangles <a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">*</a> <code>"offset"</code>: The automatic extension distance of the mesh
If positive: same scale units. If negative, interpreted as a factor relative
to the approximate data diameter i.e., a value of -0.10 will add a 10% of the
data diameter as outer extension. <a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">*</a> <code>"cutoff"</code>: The minimum allowed
distance between points, it means that points at a closer distance than the
supplied value are replaced by a single vertex. it is critical when there are
some points very close to each other, either for point locations or in the
domain boundary. <a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">*</a> <code>"proj_stepsize"</code>: The stepsize for spatial
predictions, which affects the spatial grain of any outputs created.</p>
<p>Priors can be set via <a href="INLAPrior.html">INLAPrior</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p><strong>How INLA Meshes are generated, substantially influences prediction outcomes. See Dambly et al. (2023).</strong></p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<ul><li><p>Havard Rue, Sara Martino, and Nicholas Chopin (2009), Approximate Bayesian
Inference for Latent Gaussian Models Using Integrated Nested Laplace Approximations
(with discussion), Journal of the Royal Statistical Society B, 71, 319-392.</p></li>
<li><p>Finn Lindgren, Havard Rue, and Johan Lindstrom (2011). An Explicit Link Between
Gaussian Fields and Gaussian Markov Random Fields: The Stochastic Partial Differential
Equation Approach (with discussion), Journal of the Royal Statistical Society B, 73(4),
423-498.</p></li>
<li><p>Simpson, Daniel, Janine B. Illian, S. H. Sørbye, and Håvard Rue. 2016. “Going
Off Grid: Computationally Efficient Inference for Log-Gaussian Cox Processes.”
Biometrika 1 (103): 49–70.</p></li>
<li><p>Dambly, L. I., Isaac, N. J., Jones, K. E., Boughey, K. L., &amp; O'Hara, R. B. (2023).
Integrated species distribution models fitted in INLA are sensitive to mesh
parameterisation. Ecography, e06391.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other engine:
<code><a href="engine_bart.html">engine_bart</a>()</code>,
<code><a href="engine_breg.html">engine_breg</a>()</code>,
<code><a href="engine_gdb.html">engine_gdb</a>()</code>,
<code><a href="engine_glm.html">engine_glm</a>()</code>,
<code><a href="engine_glmnet.html">engine_glmnet</a>()</code>,
<code><a href="engine_inlabru.html">engine_inlabru</a>()</code>,
<code><a href="engine_scampr.html">engine_scampr</a>()</code>,
<code><a href="engine_stan.html">engine_stan</a>()</code>,
<code><a href="engine_xgboost.html">engine_xgboost</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Add INLA as an engine (with a custom mesh)</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="distribution.html">distribution</a></span><span class="op">(</span><span class="va">background</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">engine_inla</span><span class="op">(</span>mesh <span class="op">=</span> <span class="va">my_mesh</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martin Jung.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

