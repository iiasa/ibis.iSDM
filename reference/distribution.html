<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='This function creates an object that contains all the data,
parameters and settings for building an (integrated) species distribution
model. Key functions to add data are add_biodiversity_poipo and the like,
add_predictors, add_latent_spatial, engine_glmnet or similar,
add_priors and add_offset. It creates a prototype
BiodiversityDistribution object with its own functions. After setting
input data and parameters, model predictions can then be created via the
train function and predictions be created.
Additionally, it is possible to specify a "limit" to any predictions
conducted on the background. This can be for instance a buffered layer by a
certain dispersal distance (Cooper and Soberon, 2018) or a categorical layer
representing biomes or soil conditions. Another option is to create a
constraint by constructing a minimum convex polygon (MCP) using the supplied
biodiversity data. This option can be enabled by setting
"limits_method" to "mcp". It is also possible to provide a
small buffer to constructed MCP that way. See the frequently asked question
(FAQ) section on the homepage for more information.
See Details for a description of the internal functions available to
modify or summarize data within the created object.
Note that any model requires at minimum a single added biodiversity dataset
as well as a specified engine.'><title>Create distribution modelling procedure — distribution • ibis.iSDM</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create distribution modelling procedure — distribution"><meta property="og:description" content='This function creates an object that contains all the data,
parameters and settings for building an (integrated) species distribution
model. Key functions to add data are add_biodiversity_poipo and the like,
add_predictors, add_latent_spatial, engine_glmnet or similar,
add_priors and add_offset. It creates a prototype
BiodiversityDistribution object with its own functions. After setting
input data and parameters, model predictions can then be created via the
train function and predictions be created.
Additionally, it is possible to specify a "limit" to any predictions
conducted on the background. This can be for instance a buffered layer by a
certain dispersal distance (Cooper and Soberon, 2018) or a categorical layer
representing biomes or soil conditions. Another option is to create a
constraint by constructing a minimum convex polygon (MCP) using the supplied
biodiversity data. This option can be enabled by setting
"limits_method" to "mcp". It is also possible to provide a
small buffer to constructed MCP that way. See the frequently asked question
(FAQ) section on the homepage for more information.
See Details for a description of the internal functions available to
modify or summarize data within the created object.
Note that any model requires at minimum a single added biodiversity dataset
as well as a specified engine.'><meta property="og:image" content="https://iiasa.github.io/ibis.iSDM/logo.png"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@Martin_Ecology"><meta name="twitter:site" content="@IIASAVienna"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ibis.iSDM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/01_data_preparationhelpers.html">1. Helper functions to prepare inputs</a>
    <a class="dropdown-item" href="../articles/02_train_simple_model.html">2. Train a model</a>
    <a class="dropdown-item" href="../articles/03_integrate_data.html">3. Integrate data</a>
    <a class="dropdown-item" href="../articles/04_biodiversity_projections.html">4. Biodiversity projections</a>
    <a class="dropdown-item" href="../articles/05_mechanistic_estimation.html">5. Simulating mechanisms</a>
    <a class="dropdown-item" href="../articles/06_engine_comparison.html">6. Engine comparison</a>
    <a class="dropdown-item" href="../articles/07_package_comparison.html">7. Other packages</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/08_frequently-asked-questions.html">FAQ</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/contributing.html">Contributing</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/iiasa/ibis.iSDM/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create distribution modelling procedure</h1>
      <small class="dont-index">Source: <a href="https://github.com/iiasa/ibis.iSDM/blob/HEAD/R/distribution.R" class="external-link"><code>R/distribution.R</code></a></small>
      <div class="d-none name"><code>distribution.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function creates an object that contains all the data,
parameters and settings for building an (integrated) species distribution
model. Key functions to add data are <code><a href="add_biodiversity_poipo.html">add_biodiversity_poipo</a></code> and the like,
<code><a href="add_predictors.html">add_predictors</a></code>, <code><a href="add_latent_spatial.html">add_latent_spatial</a></code>, <code><a href="engine_glmnet.html">engine_glmnet</a></code> or similar,
<code><a href="add_priors.html">add_priors</a></code> and <code><a href="add_offset.html">add_offset</a></code>. It creates a prototype
<code><a href="BiodiversityDistribution-class.html">BiodiversityDistribution</a></code> object with its own functions. After setting
input data and parameters, model predictions can then be created via the
<a href="train.html">train</a> function and predictions be created.</p>
<p>Additionally, it is possible to specify a <code>"limit"</code> to any predictions
conducted on the background. This can be for instance a buffered layer by a
certain dispersal distance (Cooper and Soberon, 2018) or a categorical layer
representing biomes or soil conditions. Another option is to create a
constraint by constructing a minimum convex polygon (MCP) using the supplied
biodiversity data. This option can be enabled by setting
<code>"limits_method"</code> to <code>"mcp"</code>. It is also possible to provide a
small buffer to constructed MCP that way. See the frequently asked question
(FAQ) section on the homepage for more information.</p>
<p>See <strong>Details</strong> for a description of the internal functions available to
modify or summarize data within the created object.</p>
<p><strong>Note that any model requires at minimum a single added biodiversity dataset
as well as a specified engine.</strong></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">distribution</span><span class="op">(</span></span>
<span>  <span class="va">background</span>,</span>
<span>  limits <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  limits_method <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  mcp_buffer <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  limits_clip <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for SpatRaster</span></span>
<span><span class="fu">distribution</span><span class="op">(</span></span>
<span>  <span class="va">background</span>,</span>
<span>  limits <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  limits_method <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  mcp_buffer <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  limits_clip <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for sf</span></span>
<span><span class="fu">distribution</span><span class="op">(</span></span>
<span>  <span class="va">background</span>,</span>
<span>  limits <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  limits_method <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  mcp_buffer <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  limits_clip <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>background</dt>
<dd><p>Specification of the modelling background. Must be a
<code>SpatRaster</code> or <code>sf</code> object.</p></dd>


<dt>limits</dt>
<dd><p>A <code>SpatRaster</code> or <code>sf</code> object that limits the prediction
surface when intersected with input data (Default: <code>NULL</code>).</p></dd>


<dt>limits_method</dt>
<dd><p>A <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code> of the method used for hard limiting a
projection. Available options are <code>"none"</code> (Default), <code>"zones"</code>
or <code>"mcp"</code>.</p></dd>


<dt>mcp_buffer</dt>
<dd><p>A <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code> distance to buffer the mcp (Default <code>0</code>).
Only used if <code>"mcp"</code> is used.</p></dd>


<dt>limits_clip</dt>
<dd><p><code><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></code> Should the limits clip all predictors before
fitting a model (<code>TRUE</code>) or just the prediction (<code>FALSE</code>, default).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p><code><a href="BiodiversityDistribution-class.html">BiodiversityDistribution</a></code> object containing data for building
a biodiversity distribution modelling problem.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function creates a <code><a href="BiodiversityDistribution-class.html">BiodiversityDistribution</a></code> object
that in itself contains other functions and stores parameters and
(pre-)processed data. A full list of functions available can be queried via
<code>"names(object)"</code>. Some of the functions are not intended to be
manipulated directly, but rather through convenience functions (e.g.
<code>"object$set_predictors()"</code>). Similarly other objects are stored in the
<code><a href="BiodiversityDistribution-class.html">BiodiversityDistribution</a></code> object that have their own functions as
well and can be queried (e.g. <code>"names(object)"</code>). For a list of
functions see the reference documentation. By default, if some datasets are
not set, then a <code>"Waiver"</code> object is returned instead.</p>
<p>The following objects can be stored:</p><ul><li><p><code>object$biodiversity</code> A <code><a href="BiodiversityDatasetCollection-class.html">BiodiversityDatasetCollection</a></code> object with
the added biodiversity data.</p></li>
<li><p><code>object$engine</code> An <code>"engine"</code> object (e.g. <code><a href="engine_inlabru.html">engine_inlabru()</a></code>)
with function depended on the added engine.</p></li>
<li><p><code>object$predictors</code> A <code><a href="PredictorDataset-class.html">PredictorDataset</a></code> object with all set predictions.</p></li>
<li><p><code>object$priors</code> A <code><a href="PriorList-class.html">PriorList</a></code> object with all specified priors.</p></li>
<li><p><code>object$log</code> A <code><a href="Log-class.html">Log</a></code> object that captures.</p></li>
</ul><p>Useful high-level functions to address those objects are for instance:</p><ul><li><p><code>object$show()</code> A generic summary of the <code><a href="BiodiversityDistribution-class.html">BiodiversityDistribution</a></code>
object contents. Can also be called via <a href="print.html">print</a>.</p></li>
<li><p><code>object$get_biodiversity_equations()</code> Lists the equations used for each
biodiversity dataset with given id. Defaults to all predictors.</p></li>
<li><p><code>object$get_biodiversity_types()</code> Lists the type of each specified
biodiversity dataset with given id.</p></li>
<li><p><code>object$get_extent()</code> Outputs the <a href="https://rspatial.github.io/terra/reference/ext.html" class="external-link">terra::ext</a> of the modelling region.</p></li>
<li><p><code>object$show_background_info()</code> Returns a <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></code> with the <a href="https://rspatial.github.io/terra/reference/ext.html" class="external-link">terra::ext</a>
and the <a href="https://rspatial.github.io/terra/reference/crs.html" class="external-link">terra::crs</a>.</p></li>
<li><p><code>object$get_extent_dimensions()</code> Outputs the <a href="https://rspatial.github.io/terra/reference/ext.html" class="external-link">terra::ext</a> dimension by
calling the <code>"extent_dimensions()"</code> function.</p></li>
<li><p><code>object$get_predictor_names()</code> Returns a <a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> vector with the
names of all added predictors.</p></li>
<li><p><code>object$get_prior_variables()</code> Returns a description of <code><a href="priors.html">priors</a></code> added.</p></li>
</ul><p>There are other functions as well but those are better accessed through their
respective wrapper functions.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    
<ul><li><p>Fletcher, R.J., Hefley, T.J., Robertson, E.P., Zuckerberg, B., McCleery, R.A.,
Dorazio, R.M., (2019) A practical guide for combining data to model species
distributions. Ecology 100, e02710. https://doi.org/10.1002/ecy.2710</p></li>
<li><p>Cooper, Jacob C., and Jorge Soberón. "Creating individual accessible area
hypotheses improves stacked species distribution model performance." Global
Ecology and Biogeography 27, no. 1 (2018): 156-165.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="BiodiversityDistribution-class.html">BiodiversityDistribution</a></code> and other classes.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Load background raster</span></span></span>
<span class="r-in"><span><span class="va">background</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/europegrid_50km.tif"</span>,package <span class="op">=</span> <span class="st">"ibis.iSDM"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Define model</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">distribution</span><span class="op">(</span><span class="va">background</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">[Setup] 2024-05-15 07:22:00.801452 | Creating distribution object...</span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB; font-weight: bold;">&lt;Biodiversity distribution model&gt;</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Background extent: </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      xmin: -16.064, xmax: 36.322,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>      ymin: 34.95, ymax: 71.535</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>    projection: +proj=longlat +datum=WGS84 +no_defs</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  --------- </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Biodiversity data:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>    <span style="color: #BB0000;">None</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  --------- </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   predictors:     None</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   priors:         &lt;Default&gt;</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   latent:         None</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   log:            &lt;Console&gt;</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   engine:         <span style="color: #BB0000;">&lt;NONE&gt;</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martin Jung.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

