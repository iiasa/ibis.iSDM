<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function allows to add predictors to distribution or
BiodiversityScenario objects. Predictors are covariates that in spatial
projection have to match the geographic projection of the background layer in
the distribution object. This function furthermore allows to transform or
create derivates of provided predictors.
A transformation takes the provided rasters and for instance rescales them or
transforms them through a principal component analysis (prcomp). In
contrast, derivates leave the original provided predictors alone, but instead
create new ones, for instance by transforming their values through a
quadratic or hinge transformation. Note that this effectively increases the
number of predictors in the object, generally requiring stronger
regularization by the used Engine. Both transformations and derivates can
also be combined. Available options for transformation are:
'none' - Leaves the provided predictors in the original scale.
'pca' - Converts the predictors to principal components. Note that this
results in a renaming of the variables to principal component axes!
'scale' - Transforms all predictors by applying scale on them.
'norm' - Normalizes all predictors by transforming them to a scale from 0 to 1.
'windsor' - Applies a windsorization to the target predictors. By default
this effectively cuts the predictors to the 0.05 and 0.95, thus helping to
remove extreme outliers.


Available options for creating derivates are:
'none' - No additional predictor derivates are created.
'quad' - Adds quadratic transformed predictors.
'interaction' - Add interacting predictors. Interactions need to be specified (&quot;int_variables&quot;)!
'thresh' - Add threshold transformed predictors.
'hinge' - Add hinge transformed predictors.
'bin' - Add predictors binned by their percentiles.

"><title>Add predictors to a Biodiversity distribution object — add_predictors • ibis.iSDM</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add predictors to a Biodiversity distribution object — add_predictors"><meta property="og:description" content="This function allows to add predictors to distribution or
BiodiversityScenario objects. Predictors are covariates that in spatial
projection have to match the geographic projection of the background layer in
the distribution object. This function furthermore allows to transform or
create derivates of provided predictors.
A transformation takes the provided rasters and for instance rescales them or
transforms them through a principal component analysis (prcomp). In
contrast, derivates leave the original provided predictors alone, but instead
create new ones, for instance by transforming their values through a
quadratic or hinge transformation. Note that this effectively increases the
number of predictors in the object, generally requiring stronger
regularization by the used Engine. Both transformations and derivates can
also be combined. Available options for transformation are:
'none' - Leaves the provided predictors in the original scale.
'pca' - Converts the predictors to principal components. Note that this
results in a renaming of the variables to principal component axes!
'scale' - Transforms all predictors by applying scale on them.
'norm' - Normalizes all predictors by transforming them to a scale from 0 to 1.
'windsor' - Applies a windsorization to the target predictors. By default
this effectively cuts the predictors to the 0.05 and 0.95, thus helping to
remove extreme outliers.


Available options for creating derivates are:
'none' - No additional predictor derivates are created.
'quad' - Adds quadratic transformed predictors.
'interaction' - Add interacting predictors. Interactions need to be specified (&quot;int_variables&quot;)!
'thresh' - Add threshold transformed predictors.
'hinge' - Add hinge transformed predictors.
'bin' - Add predictors binned by their percentiles.

"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@Martin_Ecology"><meta name="twitter:site" content="@IIASAVienna"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ibis.iSDM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.8</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/01_train_simple_model.html">1. Train a model</a>
    <a class="dropdown-item" href="../articles/02_integrate_data.html">2. Integrate data</a>
    <a class="dropdown-item" href="../articles/03_biodiversity_projections.html">3. Biodiversity projections</a>
    <a class="dropdown-item" href="../articles/04_mechanistic_estimation.html">4. Simulating mechanisms</a>
    <a class="dropdown-item" href="../articles/05_engine_comparison.html">5. Engine comparison</a>
    <a class="dropdown-item" href="../articles/06_package_comparison.html">6. Other packages</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/07_frequently-asked-questions.html">FAQ</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/contributing.html">Contributing</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/iiasa/ibis.iSDM/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Add predictors to a Biodiversity distribution object</h1>
      <small class="dont-index">Source: <a href="https://github.com/iiasa/ibis.iSDM/blob/HEAD/R/add_predictors.R" class="external-link"><code>R/add_predictors.R</code></a></small>
      <div class="d-none name"><code>add_predictors.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function allows to add predictors to <a href="distribution.html">distribution</a> or
<a href="BiodiversityScenario-class.html">BiodiversityScenario</a> objects. Predictors are covariates that in spatial
projection have to match the geographic projection of the background layer in
the <a href="distribution.html">distribution</a> object. This function furthermore allows to transform or
create derivates of provided predictors.</p>
<p>A transformation takes the provided rasters and for instance rescales them or
transforms them through a principal component analysis (<a href="https://rdrr.io/r/stats/prcomp.html" class="external-link">prcomp</a>). In
contrast, derivates leave the original provided predictors alone, but instead
create new ones, for instance by transforming their values through a
quadratic or hinge transformation. Note that this effectively increases the
number of predictors in the object, generally requiring stronger
regularization by the used <code><a href="Engine-class.html">Engine</a></code>. Both transformations and derivates can
also be combined. Available options for transformation are:</p><ul><li><p><code>'none'</code> - Leaves the provided predictors in the original scale.</p></li>
<li><p><code>'pca'</code> - Converts the predictors to principal components. Note that this
results in a renaming of the variables to principal component axes!</p></li>
<li><p><code>'scale'</code> - Transforms all predictors by applying <a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a> on them.</p></li>
<li><p><code>'norm'</code> - Normalizes all predictors by transforming them to a scale from 0 to 1.</p></li>
<li><p><code>'windsor'</code> - Applies a windsorization to the target predictors. By default
this effectively cuts the predictors to the 0.05 and 0.95, thus helping to
remove extreme outliers.</p></li>
</ul><p>Available options for creating derivates are:</p><ul><li><p><code>'none'</code> - No additional predictor derivates are created.</p></li>
<li><p><code>'quad'</code> - Adds quadratic transformed predictors.</p></li>
<li><p><code>'interaction'</code> - Add interacting predictors. Interactions need to be specified (<code>"int_variables"</code>)!</p></li>
<li><p><code>'thresh'</code> - Add threshold transformed predictors.</p></li>
<li><p><code>'hinge'</code> - Add hinge transformed predictors.</p></li>
<li><p><code>'bin'</code> - Add predictors binned by their percentiles.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_predictors</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">env</span>,</span>
<span>  names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  transform <span class="op">=</span> <span class="st">"scale"</span>,</span>
<span>  derivates <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  derivate_knots <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  int_variables <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  bgmask <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  harmonize_na <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  explode_factors <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  priors <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for BiodiversityDistribution,SpatRasterCollection,ANY,character,character,numeric,ANY,logical,logical,logical,ANY</span></span>
<span><span class="fu">add_predictors</span><span class="op">(</span><span class="va">x</span>,<span class="va">env</span>,<span class="va">names</span>,<span class="va">transform</span>,<span class="va">derivates</span>,<span class="va">derivate_knots</span>,<span class="va">int_variables</span>,<span class="va">bgmask</span>,<span class="va">harmonize_na</span>,<span class="va">explode_factors</span>,<span class="va">priors</span>,<span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for BiodiversityDistribution,SpatRaster,ANY,character,character,numeric,ANY,logical,logical,logical,ANY</span></span>
<span><span class="fu">add_predictors</span><span class="op">(</span><span class="va">x</span>,<span class="va">env</span>,<span class="va">names</span>,<span class="va">transform</span>,<span class="va">derivates</span>,<span class="va">derivate_knots</span>,<span class="va">int_variables</span>,<span class="va">bgmask</span>,<span class="va">harmonize_na</span>,<span class="va">explode_factors</span>,<span class="va">priors</span>,<span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for BiodiversityDistribution,stars,ANY,character,character,numeric,ANY,logical,logical,logical,ANY</span></span>
<span><span class="fu">add_predictors</span><span class="op">(</span><span class="va">x</span>,<span class="va">env</span>,<span class="va">names</span>,<span class="va">transform</span>,<span class="va">derivates</span>,<span class="va">derivate_knots</span>,<span class="va">int_variables</span>,<span class="va">bgmask</span>,<span class="va">harmonize_na</span>,<span class="va">explode_factors</span>,<span class="va">priors</span>,<span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for BiodiversityScenario,SpatRaster,ANY,character,character,numeric,ANY,logical</span></span>
<span><span class="fu">add_predictors</span><span class="op">(</span><span class="va">x</span>,<span class="va">env</span>,<span class="va">names</span>,<span class="va">transform</span>,<span class="va">derivates</span>,<span class="va">derivate_knots</span>,<span class="va">int_variables</span>,<span class="va">harmonize_na</span>,<span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for BiodiversityScenario,stars,ANY,character,character,numeric,ANY,logical</span></span>
<span><span class="fu">add_predictors</span><span class="op">(</span><span class="va">x</span>,<span class="va">env</span>,<span class="va">names</span>,<span class="va">transform</span>,<span class="va">derivates</span>,<span class="va">derivate_knots</span>,<span class="va">int_variables</span>,<span class="va">harmonize_na</span>,<span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p><code><a href="distribution.html">distribution()</a></code> (i.e. <code><a href="BiodiversityDistribution-class.html">BiodiversityDistribution</a></code>) object.</p></dd>


<dt>env</dt>
<dd><p>A <code>SpatRaster</code> or <code><a href="https://rdrr.io/r/graphics/stars.html" class="external-link">stars</a></code> object.</p></dd>


<dt>names</dt>
<dd><p>A <code><a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a></code> of character names describing the environmental
stack in case they should be renamed.</p></dd>


<dt>transform</dt>
<dd><p>A <code><a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a></code> stating whether predictors should be
preprocessed in any way (Options: <code>'none'</code>,<code>'pca'</code>,
<code>'scale'</code>, <code>'norm'</code>)</p></dd>


<dt>derivates</dt>
<dd><p>A Boolean check whether derivate features should be
considered (Options: <code>'none'</code>, <code>'thresh'</code>, <code>'hinge'</code>,
<code>'quad'</code>) )</p></dd>


<dt>derivate_knots</dt>
<dd><p>A single <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code> or <code><a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a></code> giving the number of
knots for derivate creation if relevant (Default: <code>4</code>).</p></dd>


<dt>int_variables</dt>
<dd><p>A <code><a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a></code> with length greater or equal than <code>2</code>
specifying the covariates (Default: <code>NULL</code>).</p></dd>


<dt>bgmask</dt>
<dd><p>Check whether the environmental data should be masked with the
background layer (Default: <code>TRUE</code>).</p></dd>


<dt>harmonize_na</dt>
<dd><p>A <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></code> value indicating of whether NA values
should be harmonized among predictors (Default: <code>FALSE</code>).</p></dd>


<dt>explode_factors</dt>
<dd><p><code><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></code> of whether any factor variables should be
split up into binary variables (one per class). (Default: <code>FALSE</code>).</p></dd>


<dt>priors</dt>
<dd><p>A <code><a href="PriorList-class.html">PriorList</a></code> object. Default is set to <code>NULL</code>
which uses default prior assumptions.</p></dd>


<dt>...</dt>
<dd><p>Other parameters passed down</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p><strong>Important:</strong>
Not every <code><a href="Engine-class.html">Engine</a></code> supported by the <span class="pkg">ibis.iSDM</span> R-package allows
missing data points among extracted covariates. Thus any observation with
missing data is generally removed prior from model fitting. Thus ensure that
covariates have appropriate no-data settings (for instance setting <code>NA</code>
values to <code>0</code> or another out of range constant).</p>
<p>Not every engine does actually need covariates. For instance it is perfectly
legit to fit a model with only occurrence data and a spatial latent effect
(<a href="add_latent_spatial.html">add_latent_spatial</a>). This correspondents to a spatial kernel density
estimate.</p>
<p>Certain names such <code>"offset"</code> are forbidden as predictor variable names.
The function will return an error message if these are used.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span> <span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="distribution.html">distribution</a></span><span class="op">(</span><span class="va">background</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>        <span class="fu">add_predictors</span><span class="op">(</span><span class="va">covariates</span>, transform <span class="op">=</span> <span class="st">'scale'</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">obj</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Martin Jung.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

