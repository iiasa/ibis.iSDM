% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/add_offset.R
\name{add_offset_range}
\alias{add_offset_range}
\title{Specify a expert-based species range as offset}
\usage{
add_offset_range(
  x,
  layer,
  distance_max = Inf,
  family = "poisson",
  presence_prop = 0.9,
  distance_clip = FALSE,
  distance_function = "negexp",
  field_occurrence = "Observed",
  fraction = NULL,
  point = FALSE,
  add = TRUE
)

\S4method{add_offset_range}{BiodiversityDistribution,SpatRaster,ANY,logical}(x,layer,fraction,add)

\S4method{add_offset_range}{BiodiversityDistribution,sf,numeric,character,numeric,logical,character,character,ANY,ANY,logical}(x,layer,distance_max,family,presence_prop,distance_clip,distance_function,field_occurrence,fraction,point,add)
}
\arguments{
\item{x}{\code{\link[=distribution]{distribution()}} (i.e. \code{\linkS4class{BiodiversityDistribution}}) object.}

\item{layer}{A \code{\link{sf}} or \code{\link{SpatRaster}} object with the range for the target
feature.}

\item{distance_max}{A \code{\link{numeric}} threshold on the maximum distance beyond
the range that should be considered to have a high likelihood of containing
species occurrences (Default: \code{Inf} \code{"m"}). Can be set to
\code{NULL} or \code{0} to indicate that no distance should be calculated.}

\item{family}{A \code{\link{character}} denoting the type of model to which this offset
is to be added. By default it assumes a \code{'poisson'} distributed model
and as a result the output created by this function will be
log-transformed. If however a \code{'binomial'} distribution is chosen,
than the output will be \code{`logit`} transformed. For integrated models
leave at default.}

\item{presence_prop}{\code{\link{numeric}} giving the proportion of all records
expected to be inside the range. By default this is set to \code{0.9}
indicating that 10\% of all records are likely outside the range.}

\item{distance_clip}{\code{\link{logical}} as to whether distance should be clipped
after the maximum distance (Default: \code{FALSE}).}

\item{distance_function}{A \code{\link{character}} specifying the distance function to
be used. Available are negative exponential kernels (\code{"negexp"},
default) and a five parameters logistic curve (code{"logcurve"}) as
proposed by Merow et al. 2017.}

\item{field_occurrence}{A \code{\link{numeric}} or \code{\link{character}} location of
biodiversity point records.}

\item{fraction}{An optional \code{\link{SpatRaster}} object that is multiplied with
digitized raster layer. Can be used to for example to remove or reduce the
expected value (Default: \code{NULL}).}

\item{point}{An optional \code{\link{sf}} layer with points or \code{\link{logical}} argument. In
the case of the latter the point data is ignored (Default: \code{FALSE}).}

\item{add}{\code{\link{logical}} specifying whether new offset is to be added. Setting
this parameter to \code{FALSE} replaces the current offsets with the new
one (Default: \code{TRUE}).}
}
\value{
Adds a range offset to a \code{\link{distribution}} object.
}
\description{
This function has additional options compared to the more
generic \code{\link[=add_offset]{add_offset()}}, allowing customized options specifically for
expert-based ranges as offsets or spatialized polygon information on species
occurrences. If even more control is needed, the user is informed of the
\code{"bossMaps"} package Merow et al. (2017). Some functionalities of that
package emulated through the \code{"distance_function"} set to \code{"log"}.
This tries to fit a 5-parameter logistic function to estimate the distance
from the range (Merow et al. 2017).
}
\details{
The output created by this function creates a \code{\link{SpatRaster}} to be
added to a provided distribution object. Offsets in regression models are
likelihood specific as they are added directly to the overall estimate of
\code{`y^hat`}.

Note that all offsets created by this function are by default log-transformed
before export. Background values (e.g. beyond \code{"distance_max"}) are set
to a very small constant (\code{1e-10}).
}
\examples{
\dontrun{
 # Adds the offset to a distribution object
 distribution(background) |> add_offset_range(species_range)
}
}
\references{
\itemize{
\item Merow, C., Wilson, A.M., Jetz, W., 2017. Integrating occurrence data and expert maps for improved species range predictions. Glob. Ecol. Biogeogr. 26, 243–258. https://doi.org/10.1111/geb.12539
\item Merow, C., Allen, J.M., Aiello-Lammens, M., Silander, J.A., 2016. Improving niche and range estimates with Maxent and point process models by integrating spatially explicit information. Glob. Ecol. Biogeogr. 25, 1022–1036. https://doi.org/10.1111/geb.12453
}
}
\seealso{
\code{"bossMaps"}

Other offset: 
\code{\link{add_offset_bias}()},
\code{\link{add_offset_elevation}()},
\code{\link{add_offset}()},
\code{\link{rm_offset}()}
}
\concept{offset}
\keyword{offset}
\keyword{prior,}
