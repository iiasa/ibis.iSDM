% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/simulate_population_steps.R
\name{simulate_population_steps}
\alias{simulate_population_steps}
\alias{simulate_population_steps,BiodiversityScenario,matrix-method}
\title{Simulate population dynamics following the steps approach}
\usage{
simulate_population_steps(
  mod,
  vital_rates,
  replicates = 1,
  carrying_capacity = NULL,
  initial = NULL,
  dispersal = NULL,
  density_dependence = NULL,
  include_suitability = TRUE
)

\S4method{simulate_population_steps}{BiodiversityScenario,matrix}(
  mod,
  vital_rates,
  replicates = 1,
  carrying_capacity = NULL,
  initial = NULL,
  dispersal = NULL,
  density_dependence = NULL,
  include_suitability = TRUE
)
}
\arguments{
\item{mod}{A \code{\link{BiodiversityScenario}} object with specified predictors.}

\item{vital_rates}{A symmetrical demographic matrix. Should have column and row
names equivalent to the vital stages that are to be estimated.}

\item{replicates}{A \code{\link{numeric}} vector of the number of replicates (Default: \code{1}).}

\item{carrying_capacity}{Either \code{\link{SpatRaster}} or a \code{\link{numeric}} estimate of the
maximum carrying capacity, e.g. how many adult individual are likely to occur
per grid cell. If set to \code{\link{numeric}}, then carrying capacity is estimated up
to a maximum set (\emph{Note: a more clever way would be to use a species-area relationship
for scaling. This is not yet implemented}).}

\item{initial}{A \code{\link{SpatRaster}} giving the initial population size. If not
provided, then initial populations are guessed (see details) from the projected
suitability rasters (Default: \code{NULL}).}

\item{dispersal}{A dispersal object defined by the \code{steps} package (Default: \code{NULL}).}

\item{density_dependence}{Specification of density dependence defined by the
\code{steps} package (Default: \code{NULL}).}

\item{include_suitability}{A \code{\link{logical}} flag on whether the projected suitability
estimates should be used (Default: \code{TRUE}) or only the initial conditions
set to the first time step.}
}
\value{
Adds flag to a \code{\link{BiodiversityScenario}} object to indicate that
further simulations are added during projection.
}
\description{
This function adds a flag to a \code{\linkS4class{BiodiversityScenario}} object
to indicate that species abundances are to be simulated based on the expected
habitat suitability, as well as demography, density-dependence and dispersal
information. The simulation is done using the \emph{steps} package (Visintin et
al. 2020) and conducted after a habitat suitability projection has been
created. \emph{steps} is a spatially explicit population models coded mostly in R.

For a detailed description of \emph{steps} parameters, please see the respective reference
and help files. Default assumptions underlying this wrapper are presented in the details
}
\details{
In order for this function to work the \emph{steps} package has to be installed
separately. Instructions to do so can be found on \href{https://github.com/steps-dev/steps}{github}.

If initial population lifestages are not provided, then they are estimated
assuming a linear scaling with suitability, a \code{50:50} split between
sexes and a \code{1:3} ratio of adults to juveniles. The provision of
different parameters is highly encouraged!
}
\note{
The \emph{steps} package has multiple options for simulating species population and
not all possible options are represented in this wrapper.

Furthermore, the package still makes use of the \code{raster} package for much
of its internal data processing. Since \emph{ibis.iSDM} switched to \link{terra} a while
ago, there can be efficiency problems as layers need to be translated between
packages.
}
\examples{
\dontrun{
# Define vital rates
vt <- matrix(c(0.0,0.5,0.75,
               0.5,0.2,0.0,
               0.0,0.5,0.9),
               nrow = 3, ncol = 3, byrow = TRUE)
colnames(vt) <- rownames(vt) <- c('juvenile','subadult','adult')

# Assumes that a trained 'model' object exists
 mod <- scenario(model) |>
  add_predictors(env = predictors, transform = 'scale',
                 derivates = "none") |>
  # Use Vital rates here, but note the other parameters!
  simulate_population_steps(vital_rates = vt) |>
  project()
}

}
\references{
\itemize{
\item Visintin, C., Briscoe, N. J., Woolley, S. N., Lentini, P. E., Tingley, R.,
Wintle, B. A., & Golding, N. (2020). steps: Software for spatially and
temporally explicit population simulations. Methods in Ecology and Evolution,
11(4), 596-603. https://doi.org/10.1111/2041-210X.13354
}
}
\seealso{
Other constraint: 
\code{\link{add_constraint}()},
\code{\link{add_constraint_MigClim}()},
\code{\link{add_constraint_adaptability}()},
\code{\link{add_constraint_boundary}()},
\code{\link{add_constraint_connectivity}()},
\code{\link{add_constraint_dispersal}()},
\code{\link{add_constraint_minsize}()}
}
\concept{constraint}
\keyword{scenario}
