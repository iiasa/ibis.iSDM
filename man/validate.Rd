% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/validate.R
\name{validate}
\alias{validate}
\alias{validate,ANY-method}
\alias{validate,SpatRaster-method}
\title{Validation of a fitted distribution object}
\usage{
validate(
  mod,
  method = "continuous",
  layer = "mean",
  point = NULL,
  point_column = "observed",
  field_occurrence = NULL,
  ...
)

\S4method{validate}{ANY}(
  mod,
  method = "continuous",
  layer = "mean",
  point = NULL,
  point_column = "observed",
  field_occurrence = NULL,
  ...
)

\S4method{validate}{SpatRaster}(
  mod,
  method = "continuous",
  layer = NULL,
  point = NULL,
  point_column = "observed",
  field_occurrence = NULL,
  ...
)
}
\arguments{
\item{mod}{A fitted \code{\link{BiodiversityDistribution}} object with set predictors.
Alternatively one can also provide directly a \code{\link{SpatRaster}}, however in this
case the \code{point} layer also needs to be provided.}

\item{method}{Should the validation be conducted on the continious prediction
or a (previously calculated) thresholded layer in binary format? Note that
depending on the method different metrics can be computed. See Details.}

\item{layer}{In case multiple layers exist, which one to use? (Default: \code{'mean'}).}

\item{point}{A \code{\link{sf}} object with type \code{POINT} or \code{MULTIPOINT}.}

\item{point_column}{A \code{\link{character}} vector with the name of the column containing
the independent observations. (Default: \code{'observed'}).}

\item{field_occurrence}{(Deprectated) A \code{\link{character}} field pointing to the name
of the independent observations. Identical to \code{"point_column"}}

\item{...}{Other parameters that are passed on. Currently unused.}
}
\value{
Return a tidy \code{\link{tibble}} with validation results.
}
\description{
This function conducts a model evaluation based on either on the
fitted point data or any supplied independent. \strong{Currently only supporting point
datasets. For validation of integrated models more work is needed.}
}
\details{
The \code{'validate'} function calculates different validation
metrics depending on the output type.

The output metrics for each type are defined as follows:
(where TP stands for true positive, TN for true negative,
FP the false positive and FN the false negative)
\strong{Continuous:}
\itemize{
\item \code{'n'} = Number of observations.
\item \code{'rmse'} = Root Mean Square Error, \deqn{ \sqrt {\frac{1}{N} \sum_{i=1}^{N} (\hat{y_{i}} - y_{i})^2} }
\item \code{'mae'} = Mean Absolute Error, \deqn{ \frac{ \sum_{i=1}^{N} y_{i} - x_{i} }{n} }
\item \code{'logloss'} = Log loss, TBD
\item \code{'normgini'} = Normalized Gini index, TBD
\item \code{'cont.boyce'} = Continuous Boyce index, Ratio of predicted against expected frequency calculated over
a moving window: \deqn{\frac{P_{i}{E_{i}} }}, where \deqn{ P_{i} = \frac{p_{i}}{\sum{j=1}^{b} p_{j} }} and \deqn{ E_{i} = \frac{a_{i}}{\sum{j=1}^{b} a_{j} }}
}

\strong{Discrete:}
\itemize{
\item \code{'n'} = Number of observations.
\item \code{'auc'} = Area under the curve, e.g. the integral of a function relating the True positive rate
against the false positive rate.
\item \code{'overall.accuracy'} = Overall Accuracy, Average of all positives,\deqn{ \frac{TP + TN}{n} }
\item \code{'true.presence.ratio'} = True presence ratio or Jaccard index, \deqn{ \frac{TP}{TP+TN+FP+FN} }
\item \code{'precision'} = Precision, positive detection rate \deqn{ \frac{TP}{TP+FP} }
\item \code{'sensitivity'} = Sensitivity, Ratio of True positives against all positives, \deqn{ \frac{TP}{TP+FP} }
\item \code{'specificity'} = Specifivity, Ratio of True negatives against all negatives, \deqn{ \frac{TN}{TN+FN} }
\item \code{'tss'} = True Skill Statistics, \code{sensitivity + specificity – 1}
* \code{'f1'} = F1 Score or Positive predictive value, \deqn{ \frac{2TP}{2TP + FP + FN} }
\item \code{'logloss'} = Log loss, TBD
\item \code{'expected.accuracy'} = Expected Accuracy, \deqn{ \frac{TP + FP}{N} x \frac{TP + FN}{N} + \frac{TN + FN}{N} x \frac{TN + FP}{N} }
\item \code{'kappa'} = Kappa value, \deqn{ \frac{2 (TP x TN - FN x FP)}{(TP + FP) x (FP + TN) + (TP + FN) x (FN + TN) } },
\item \code{'brier.score'} = Brier score, \deqn{ \frac{ \sum_{i=1}^{N} (y_{i} - x_{i})^{2} }{n} },
where \deqn{y_{i}} is predicted presence or absence and \deqn{x_{i}} an observed.
}
}
\note{
If you use the Boyce Index, please cite the original Hirzel et al. (2006) paper.
}
\examples{
\dontrun{
 # Assuming that mod is a distribution object and has a thresholded layer
 mod <- threshold(mod, method = "TSS")
 validate(mod, method = "discrete")
 }

}
\references{
\itemize{
\item Allouche O., Tsoar A., Kadmon R., (2006). Assessing the accuracy of species distribution models:
prevalence, kappa and the true skill statistic (TSS). Journal of Applied Ecology, 43(6), 1223–1232.
\item Liu, C., White, M., Newell, G., 2013. Selecting thresholds for the prediction
of species occurrence with presence-only data. J. Biogeogr. 40, 778–789.
https://doi.org/10.1111/jbi.12058
\item Hirzel, A. H., Le Lay, G., Helfer, V., Randin, C., & Guisan, A. (2006).
Evaluating the ability of habitat suitability models to predict species presences.
Ecological modelling, 199(2), 142-152.
}
}
\keyword{train}
